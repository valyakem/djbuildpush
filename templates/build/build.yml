jobs:
- job: Test_Kubernetes_Command
  pool:
    name: $(agent-pool-name)

  parameters:
  - name: users
    type: object
    default:
      - name: 'john'
        email: 'john@doe.com'
      - name: 'jane'
        email: 'jane@doe.com'
      - bob

  steps:
    - ${{ each user in parameters.users }}:
      - ${{ if eq(user.name, '') }}:
        - script: echo 'User ${{ user }} has no email.'
      - ${{ if ne(user.name, '') }}:
        - script: echo 'User ${{ user.name }} with email ${{ user.email }}.'
          