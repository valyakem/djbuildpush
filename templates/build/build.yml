jobs:
- job: Test_Kubernetes_Command
  pool:
    name: $(agent-pool-name)

  steps:
  - task: AzureCLI@2
    displayName: Test AKS resources existence
    inputs:
      azureSubscription: '$(azure-subscription)'
      scriptType: 'bash'
      scriptLocation: 'inlineScript'
      inlineScript: |
          echo "Got it"

   #creation of client's secret in kubernetes
  - task: AzureCLI@2
    displayName: Test AKS resources existence
    inputs:
      azureSubscription: '$(azure-subscription)'
      scriptType: 'bash'
      scriptLocation: 'inlineScript'
      inlineScript: |
        sudo wget -qO /usr/local/bin/yq https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64
        sudo chmod a+x /usr/local/bin/yq

        sh templates/tenants/yqtest.sh

        yq '.metadata.name = $custNamespace' templates/tenants/deployments/nbsampleapp.yaml